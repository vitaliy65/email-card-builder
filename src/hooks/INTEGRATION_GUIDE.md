# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ö—É–∫–æ–≤

–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–º–µ–Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–∏ —Ö—É–∫–∞–º–∏ –≤ Email Card Builder.

## üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ö—É–∫–∏

‚úÖ **–í—Å–µ —Ö—É–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**

1. `useCanvasControls` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ canvas
2. `useBlockSelection` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–æ–º –±–ª–æ–∫–æ–≤
3. `useDragAndDrop` - Drag-and-drop –ª–æ–≥–∏–∫–∞
4. `useBlockRenderer` - –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –±–ª–æ–∫–æ–≤
5. `useBlockProperties` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏
6. `useExport` - –≠–∫—Å–ø–æ—Ä—Ç –≤ HTML
7. `useKeyboardShortcuts` - –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

## üîÑ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: BuilderCanvas (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í—ã—Å–æ–∫–∏–π)

**–§–∞–π–ª:** `src/components/canvas/BuilderCanvas.tsx`

**–ó–∞–º–µ–Ω–∞:**

```typescript
// –ë—ã–ª–æ:
const [canvasSize, setCanvasSize] = useState(CANVAS_SIZES[0].value);
const [zoom, setZoom] = useState(1);

// –°—Ç–∞–ª–æ:
const {
  canvasSize,
  zoom,
  setCanvasSize,
  setZoom,
  getCanvasStyles,
  CANVAS_SIZES,
  ZOOM_LEVELS,
} = useCanvasControls();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
- –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### –≠—Ç–∞–ø 2: DndProvider (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í—ã—Å–æ–∫–∏–π)

**–§–∞–π–ª:** `src/components/DndProvider.tsx`

**–ó–∞–º–µ–Ω–∞:**

```typescript
// –ë—ã–ª–æ:
const handleDragEnd = (event: DragEndEvent) => {
  // 50+ —Å—Ç—Ä–æ–∫ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏...
};

// –°—Ç–∞–ª–æ:
const { handleDragEnd } = useDragAndDrop();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–ª–æ–∫–æ–≤
- –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –≠—Ç–∞–ø 3: Header (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π)

**–§–∞–π–ª:** `src/components/Header.tsx`

**–ó–∞–º–µ–Ω–∞:**

```typescript
// –ë—ã–ª–æ:
// –¢–æ–ª—å–∫–æ UI, –±–µ–∑ –ª–æ–≥–∏–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞

// –°—Ç–∞–ª–æ:
const { exportToHTML, downloadHTML, copyToClipboard } = useExport();
const shortcuts = useKeyboardShortcuts();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞
- –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–æ—Ä—Ç–æ–º

### –≠—Ç–∞–ø 4: PropertiesPanel (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π)

**–§–∞–π–ª:** `src/components/sidebars/PropertiesPanel.tsx`

**–ó–∞–º–µ–Ω–∞:**

```typescript
// –ë—ã–ª–æ:
// –¢–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∞

// –°—Ç–∞–ª–æ:
const { selectedBlock, updateBlockProperty, validateBlockProperties } =
  useBlockProperties();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- –†–∞–±–æ—á–∞—è –ø–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –°–≤—è–∑—å —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –±–ª–æ–∫–æ–º

### –≠—Ç–∞–ø 5: BlockContainer (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∏–∑–∫–∏–π)

**–§–∞–π–ª:** `src/components/blocks/block-handlers/block-container.tsx`

**–ó–∞–º–µ–Ω–∞:**

```typescript
// –ë—ã–ª–æ:
const handleDragStart = () => {
  dispatch(setGrabbingBlock(uuid));
};

// –°—Ç–∞–ª–æ:
const { handleDragStart, handleDragEndBlock } = useDragAndDrop();
```

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ BuilderCanvas:

```typescript
// 1. –ò–º–ø–æ—Ä—Ç —Ö—É–∫–∞
import { useCanvasControls } from "@/hooks";

// 2. –ó–∞–º–µ–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
const { canvasSize, zoom, setCanvasSize, setZoom, getCanvasStyles } =
  useCanvasControls();

// 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ JSX
<div style={getCanvasStyles()}>{/* –∫–æ–Ω—Ç–µ–Ω—Ç */}</div>;
```

### –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:

```typescript
import { useCanvasControls, useExport, useKeyboardShortcuts } from '@/hooks';

export function MyComponent() {
  const canvas = useCanvasControls({
    persistSettings: true,
    storageKey: 'my-custom-key'
  });

  const export = useExport();

  const shortcuts = useKeyboardShortcuts({
    enabled: true,
    global: true
  });

  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ...
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:

1. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞** - –∑–∞–º–µ–Ω—è–π—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ API** - —Ö—É–∫–∏ –Ω–µ –ª–æ–º–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
4. **Fallback** - —Ö—É–∫–∏ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:

- ‚úÖ –í—Å–µ —Ö—É–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `"use client"`
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã —Å Redux Toolkit
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ store
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

- ‚úÖ –•—É–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å `useCallback`
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã
- ‚úÖ –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **useCanvasControls** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏ –∑—É–º–∞
2. **useDragAndDrop** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤
3. **useBlockSelection** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–±–æ—Ä –±–ª–æ–∫–æ–≤
4. **useExport** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç HTML
5. **useKeyboardShortcuts** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

```typescript
// –¢–µ—Å—Ç canvas controls
const { setCanvasSize, setZoom } = useCanvasControls();
setCanvasSize("mobile"); // –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å
setZoom(1.5); // –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

// –¢–µ—Å—Ç drag and drop
const { handleDragEnd } = useDragAndDrop();
// –°–∏–º—É–ª–∏—Ä—É–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ drag end

// –¢–µ—Å—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞
const { exportToHTML } = useExport();
const result = await exportToHTML();
console.log(result.success); // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å true
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –æ–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

- **–†–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** -30% –∫–æ–¥–∞
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:** +50% (–º–µ–Ω—å—à–µ –ª–æ–≥–∏–∫–∏ –≤ JSX)
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** +100% (—Ö—É–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–∑–¥–µ)
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å:** +200% (–ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ö—É–∫–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ)
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** +100% (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript)

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—á–Ω–∏—Ç–µ —Å BuilderCanvas** - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ useCanvasControls** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ DndProvider** - –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
4. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∑–∞–º–µ–Ω—è–π—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**

–í—Å–µ —Ö—É–∫–∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –Ω–µ —Å–ª–æ–º–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å! üöÄ
